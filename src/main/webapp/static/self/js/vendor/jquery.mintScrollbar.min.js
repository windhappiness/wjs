/*!
 * mintScrollbar v0.1
 * http://cople.github.com/mintScrollbar/
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){"use strict";function o(o,t){function l(e){m=Math.min(w,Math.max(0,e)),q.css("left",m),i.scrollLeft=m/w*d,M()}function n(e){b=Math.min(_,Math.max(0,e)),z.css("top",b),i.scrollTop=b/_*v,M()}function a(){X&&(P.on("click",function(e){e.target==this&&l(e.offsetX-T/2)}),q.on("mousedown",function(e){var o=e.pageX;s.addClass("mintScrollbar__viewport--active"),e.preventDefault(),L.on("mousemove.mintScrollbar",function(e){l(m+e.pageX-o),o=e.pageX,e.preventDefault()}).one("mouseup",function(){s.removeClass("mintScrollbar__viewport--active"),L.off(".mintScrollbar")})})),k&&(j.on("click",function(e){e.target==this&&n(e.offsetY-y/2)}),z.on("mousedown",function(e){var o=e.pageY;s.addClass("mintScrollbar__viewport--active"),e.preventDefault(),L.on("mousemove.mintScrollbar",function(e){n(b+e.pageY-o),o=e.pageY,e.preventDefault()}).one("mouseup",function(){s.removeClass("mintScrollbar__viewport--active"),L.off(".mintScrollbar")})})),s.on("mousewheel",function(e){if(k){var o=i.scrollTop+e.deltaY*-t.wheelSpeed;C.scrollToY(o),o>-t.wheelSpeed&&o<p-h+t.wheelSpeed&&(e.stopPropagation(),e.preventDefault())}else{var l=i.scrollLeft+(e.deltaX||e.deltaY)*-t.wheelSpeed;C.scrollToX(l),l>-t.wheelSpeed&&l<u-f+t.wheelSpeed&&(e.stopPropagation(),e.preventDefault())}}),s.on("touchstart",function(e){var o=e.originalEvent.touches[0];Y=o.pageX,x=o.pageY,s.addClass("mintScrollbar__viewport--active"),e.preventDefault()}).on("touchmove",function(e){var o=e.originalEvent.changedTouches[0];X&&(C.scrollToX(i.scrollLeft-(o.pageX-Y)),Y=o.pageX),k&&(C.scrollToY(i.scrollTop-(o.pageY-x)),x=o.pageY),e.preventDefault(),e.stopPropagation()}).on("touchend touchcancel",function(){s.removeClass("mintScrollbar__viewport--active")}),s.attr("tabindex",0).on("keydown",function(o){if(!e(o.target).is(":input, [contenteditable]")){var l=t.wheelSpeed/2,n=0,a=0;switch(o.which){case 37:n=-l;break;case 38:a=-l;break;case 39:n=l;break;case 40:a=l;break;case 33:a=-h;break;case 32:case 34:a=h;break;case 36:a=-p;break;case 35:a=p;break;default:return}X&&C.scrollByX(n),k&&C.scrollByY(a),o.stopPropagation(),o.preventDefault()}})}function r(){"function"==typeof t.onChange&&(M=function(){t.onChange.call(i)});var e=o.scrollLeft,l=o.scrollTop;"auto"==t.axis?(o.style.overflow="auto",o.scrollWidth>B.width()&&(X=!0),o.scrollHeight>B.height()&&(k=!0),o.style.overflow=""):(("both"==t.axis||"x"==t.axis)&&(X=!0),("both"==t.axis||"y"==t.axis)&&(k=!0)),B.addClass("mintScrollbar__container").wrapInner("<div class='mintScrollbar__viewport' />"),s=B.children(),i=s.get(0),X&&P.append(q).appendTo(B),k&&j.append(z).appendTo(B),a(),C.resize(),C.scrollTo(e,l)}var c={onChange:null,axis:"auto",wheelSpeed:120,disableOnMobile:!0};t=e.extend({},c,t);var s,i,u,p,f,h,d,v,m,b,g,S,w,_,T,y,Y,x,C=this,M=function(){},X=!1,k=!1,L=e(document),B=e(o),D=e("<div class='mintScrollbar' />"),P=D.clone().addClass("mintScrollbar__x"),j=D.clone().addClass("mintScrollbar__y"),O=e("<div class='mintScrollbar__thumb' />"),q=O.clone().addClass("mintScrollbar__x__thumb"),z=O.clone().addClass("mintScrollbar__y__thumb");this.resize=function(){X&&(u=i.scrollWidth,f=s.width(),d=u-f,g=P.width(),T=Math.max(20,Math.round(g/u*g)),w=g-T,q.css("width",T)),k&&(p=i.scrollHeight,h=s.height(),v=p-h,S=j.height(),y=Math.max(20,Math.round(S/p*S)),_=S-y,z.css("height",y))},this.update=function(){X&&(m=Math.round(i.scrollLeft/d*w),q.css("left",m)),k&&(b=Math.round(i.scrollTop/v*_),z.css("top",b)),M()},this.destroy=function(){var e=i.scrollTop,t=i.scrollLeft;B.removeData("mintScrollbar").removeClass("mintScrollbar__container").append(s.children()),s.remove(),P.remove(),j.remove(),o.scrollLeft=t,o.scrollTop=e},this.scrollTo=function(e,o){i.scrollLeft=e,i.scrollTop=o,C.update()},this.scrollToX=function(e){i.scrollLeft=e,C.update()},this.scrollToY=function(e){i.scrollTop=e,C.update()},this.scrollBy=function(e,o){C.scrollTo(i.scrollLeft+e,i.scrollTop+o)},this.scrollByX=function(e){C.scrollToX(i.scrollLeft+e)},this.scrollByY=function(e){C.scrollToY(i.scrollTop+e)},this.scrollByLines=function(e){var o=parseInt(B.css("lineHeight"),10);C.scrollByY((isNaN(o)?1.5*parseInt(B.css("fontSize"),10):o)*e)},this.scrollByPages=function(e){C.scrollByY(h*e)},r()}var t=/Android|iP(hone|od|ad)|webOS|BlackBerry|Opera Mini|Mobile/i.test(window.navigator.userAgent);e.fn.mintScrollbar=function(l){return l.disableOnMobile&&t?this:this.each(function(){var t=e(this);t.data("mintScrollbar")||t.data("mintScrollbar",new o(this,l))})}});